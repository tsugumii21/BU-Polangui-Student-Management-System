<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up | Student Management System</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <nav class="main-header">
      <div class="brand-logo">
        <a
          href="index.html"
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
          "
        >
          <img src="images/bup-logo.png" alt="BU Logo" />
          <span style="font-weight: 700">Bicol University Polangui S.M.S</span>
        </a>
      </div>
      <div class="nav-links">
        <a
          href="index.html"
          class="btn btn-secondary"
          style="background-color: transparent; border: 1px solid white"
          >Home</a
        >
      </div>
    </nav>

    <div class="auth-container">
      <div class="auth-card">
        <div style="text-align: center; margin-bottom: 2rem">
          <img src="images/bup-logo.png" alt="Logo" style="height: 80px" />
          <h2 style="color: var(--bu-blue); font-weight: 700; margin-top: 10px">
            Create Account
          </h2>
          <p>Join the student management community.</p>
        </div>

        <div
          id="errorMessage"
          style="
            color: #dc3545;
            text-align: center;
            margin-bottom: 1rem;
            display: none;
            font-weight: 700;
          "
        ></div>

        <form
          action="../backend/signup.php"
          method="POST"
          onsubmit="return validateSignup()"
        >
          <div class="form-group">
            <label for="username" style="font-weight: 700">Username</label>
            <div style="position: relative">
              <input
                type="text"
                id="username"
                name="username"
                class="form-control"
                required
                placeholder="Choose a username"
                minlength="4"
              />
              <i
                class="fas fa-user"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <div class="form-group">
            <label for="email" style="font-weight: 700">Email Address</label>
            <div style="position: relative">
              <input
                type="email"
                id="email"
                name="email"
                class="form-control"
                required
                placeholder="Enter your email"
              />
              <i
                class="fas fa-envelope"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <div class="form-group">
            <label for="password" style="font-weight: 700">Password</label>
            <div style="position: relative">
              <input
                type="password"
                id="password"
                name="password"
                class="form-control"
                required
                placeholder="Create a password (min 6 chars)"
                minlength="6"
              />
              <i
                class="fas fa-lock"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <div class="form-group">
            <label for="confirm_password" style="font-weight: 700"
              >Confirm Password</label
            >
            <div style="position: relative">
              <input
                type="password"
                id="confirm_password"
                name="confirm_password"
                class="form-control"
                required
                placeholder="Repeat password"
              />
              <i
                class="fas fa-lock"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%; padding: 12px; font-size: 1.1rem"
          >
            Sign Up
          </button>
        </form>

        <div style="text-align: center; margin-top: 1.5rem">
          <p>
            Already have an account?
            <a
              href="login.html"
              style="color: var(--bu-orange); font-weight: 700"
              >Login</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      function validateSignup() {
        const p1 = document.getElementById("password").value;
        const p2 = document.getElementById("confirm_password").value;
        const err = document.getElementById("errorMessage");

        if (p1 !== p2) {
          err.style.display = "block";
          err.textContent = "Passwords do not match!";
          return false;
        }
        return true;
      }

      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has("error")) {
        const err = document.getElementById("errorMessage");
        err.style.display = "block";
        if (urlParams.get("error") === "exists") {
          err.textContent = "Username already exists.";
        } else if (urlParams.get("error") === "system") {
          err.textContent = "System error. Please try again.";
        }
      }
    </script>
  </body>
</html>
