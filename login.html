<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | Student Management System</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <?php include 'header_offcanvas.php'; ?>

    <!-- Use the same header for consistency, but we need to include it via PHP or just hardcode the nav if this is pure HTML. 
         The prompt asked for login.html. HTML files cannot include PHP. 
         However, the user wants a production ready system. 
         Usually login.php is used to render the view AND handle logic, or login.html posts to login.php.
         The prompt explicitly asked for `login.html` AND `login.php`.
         So `login.html` will be the view. It won't have the dynamic header if it's pure HTML.
         But I can make it look like the others.
         
         Wait, if `login.html` is pure HTML, it can't include `header_offcanvas.php`.
         I will create a standalone navigation for login.html or just a simple page with a back button.
         The prompt said: "Shared nav/header... header_offcanvas.php".
         If I must use `login.html`, I will have to copy the nav HTML or just provide the form.
         I'll stick to a clean form page with a Home button, or I'll copy the nav structure.
         Actually, let's just make it a clean page with the form, as is common for login pages.
    -->

    <nav class="main-header">
      <div class="brand-logo">
        <a
          href="index.html"
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
          "
        >
          <img src="image/bup-logo.png" alt="BU Logo" />
          <span style="font-weight: 700">Bicol University S.M.S</span>
        </a>
      </div>
      <div class="nav-links">
        <a
          href="index.html"
          class="btn btn-secondary"
          style="background-color: transparent; border: 1px solid white"
          >Home</a
        >
      </div>
    </nav>

    <div class="auth-container">
      <div class="auth-card">
        <div style="text-align: center; margin-bottom: 2rem">
          <img src="image/bup-logo.png" alt="Logo" style="height: 80px" />
          <h2 style="color: var(--bu-blue); font-weight: 700; margin-top: 10px">
            Login
          </h2>
          <p>Welcome back! Please access your account.</p>
        </div>

        <!-- Error parameter handling via JS if needed, or simple redirect back -->
        <div
          id="errorMessage"
          style="
            color: #dc3545;
            text-align: center;
            margin-bottom: 1rem;
            display: none;
            font-weight: 700;
          "
        >
          Invalid credentials
        </div>

        <form action="login.php" method="POST">
          <div class="form-group">
            <label for="username" style="font-weight: 700">Username</label>
            <div style="position: relative">
              <input
                type="text"
                id="username"
                name="username"
                class="form-control"
                required
                placeholder="Enter your username"
              />
              <i
                class="fas fa-user"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <div class="form-group">
            <label for="password" style="font-weight: 700">Password</label>
            <div style="position: relative">
              <input
                type="password"
                id="password"
                name="password"
                class="form-control"
                required
                placeholder="Enter your password"
              />
              <i
                class="fas fa-lock"
                style="position: absolute; right: 10px; top: 12px; color: #999"
              ></i>
            </div>
          </div>

          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%; padding: 12px; font-size: 1.1rem"
          >
            Login
          </button>
        </form>

        <div style="text-align: center; margin-top: 1.5rem">
          <p>
            Don't have an account?
            <a
              href="signup.html"
              style="color: var(--bu-orange); font-weight: 700"
              >Sign Up</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      // Simple script to show error if in URL
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has("error")) {
        const err = document.getElementById("errorMessage");
        err.style.display = "block";
        if (urlParams.get("error") === "invalid") {
          err.textContent = "Invalid username or password.";
        } else if (urlParams.get("error") === "created") {
          err.style.color = "#28a745";
          err.textContent = "Account created! Please login.";
        }
      }
    </script>
  </body>
</html>
